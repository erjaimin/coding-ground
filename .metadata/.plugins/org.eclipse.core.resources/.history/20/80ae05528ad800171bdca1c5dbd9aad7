package com.mvc.controller;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.util.List;

import com.mvc.model.ImageModel;
import com.mvc.model.PerspectiveModel;

public class LoadCommand implements ViewActionCommand{
	
	private File file;
	private ImageModel imgModel;
	private PerspectiveModel topPerspectiveModel;
	private PerspectiveModel bottomPerspectiveModel;
	private ObjectInputStream ois;

	public LoadCommand(ImageModel imgModel, PerspectiveModel topPerspectiveModel,
			PerspectiveModel bottomPerspectiveModel) {
		this.imgModel = imgModel;
		this.topPerspectiveModel = topPerspectiveModel;
		this.bottomPerspectiveModel = bottomPerspectiveModel;
	}

	@Override
	public void execute() {
		if(file != null){
			try {
				ois = new ObjectInputStream(new FileInputStream(file));
				List<Object> woi = (List<Object>) ois.readObject();
				for(Object obj : woi){
					if(obj instanceof ImageModel){
						this.imgModel.setInputFile(((ImageModel)obj).getInputFile());
					}else if(obj instanceof PerspectiveModel){
						
					}
				}
			} catch (IOException | ClassNotFoundException e) {
				e.printStackTrace();
			}
			
		}
	}

	/**
	 * @return the file
	 */
	public File getFile() {
		return file;
	}

	/**
	 * @param file the file to set
	 */
	public void setFile(File file) {
		this.file = file;
	}

}
