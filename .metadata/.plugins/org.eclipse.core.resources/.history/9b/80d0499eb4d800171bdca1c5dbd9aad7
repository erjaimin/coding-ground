package com.mvc.controller;

import java.util.ArrayList;
import java.util.List;
import java.util.Stack;

public class CommandManager {
//	private List<Command> undoList = new ArrayList<>();
//	private List<Command> redoList = new ArrayList<>();
	private Stack<Command> commandStack = new Stack<>();
	private int index = -1;
	
	private static CommandManager commandManager = null;
	
	private CommandManager(){
	}
	
	public static CommandManager getInstance() {
		if(commandManager == null) {
			commandManager = new CommandManager();
		}
		return commandManager;
	}
	
//	public void addToUndoList(Command command) {
//		undoList.add(command);
//	}
//	
//	public void addToRedoList(Command command) {
//		redoList.add(command);
//	}
	
	public void addToCommandStack(Command command) {
		deleteCommandsAfterIndex();
		commandStack.push(command);
	    index++;
	}
	
	private void deleteCommandsAfterIndex() {
		if(commandStack.isEmpty()){
			return;
		}	
	    for(int i = commandStack.size()-1; i > index; i--)
	    {
	        commandStack.remove(i);
	    }
	}

	public void undo() {
		if(!commandStack.isEmpty()){
			Command command = commandStack.get(index);
		    command.unexecute();
		    index--;
		}   
	}
	
	public void redo() {
		if (redoList.size() > 0) {
			ViewActionCommand command = redoList.remove(redoList.size() - 1);
			command.execute();
		}
	}
}
